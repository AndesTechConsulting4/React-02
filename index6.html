<!DOCTYPE html>
<html lang="ru">

<head>
    <title> 1st React App </title>
    <meta charset="utf-8">
    <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.js"> </script>
</head>

<body>

    <div id="react1"> </div>
    <hr/>
    <div id="react2"> </div>
    <div id="react3"> </div>

    <script>
        
    </script>

<script>
const menuPositions = new Map();

menuPositions.set( "programmer", 'Программер');
menuPositions.set( "hr_manage", 'Кадровик');
menuPositions.set( "eng", 'Инженер');
menuPositions.set( "boss", 'Начальник');
menuPositions.set( "guard", 'Охранник');
menuPositions.set( "des", 'Дизайнер');

//--------------

const menuPositions2 = [...menuPositions].map( (data,k) =>
 {
     return {value: data[0], text: data[1]}
 } );

console.log(menuPositions2); 





</script>

<script type="text/babel">
'use strict'

class Position extends React.Component
{
   render(){ 
    return  <option value={this.props.value} id = {this.props.id}>
             {this.props.text}
            </option>;
           }
}


class UserForm2 extends React.Component
{

  state = menuPositions2[0];

  render(){

  console.log("state: ", this.state); 
   return <form onSubmit={this.formSubmited}>

   Position: <select onChange={this.onChangeHandler} value={this.state.value}
   selected> 
   {
    // [...menuPositions].map( (data,k) =>
    //          <Position value={data[0]} text={data[1]} id={k} key={k} />
    //     )
    menuPositions2.map( (data,k) =>
              <Position value={data.value} text={data.text} id={'pos_' + k} key={k} />)
   }

   </select>
   
   <p>{ typeof(this.state.value)==='undefined'?'':
   `${this.state.text} : (${this.state.value})`}
   </p>
   </form>;

  }

  onChangeHandler = (e) =>
  {
    // console.log("target: ", e.target);
     const position_value = e.target.value; 
     const position_text = e.target.options[e.target.selectedIndex].text

     this.setState({value: position_value, text: position_text});
     
  }
 

  formSubmited = (event) =>
  {
     event.preventDefault();
     console.log("sb fdata: ", this.fdata);
     //console.log("sb props: ", this.props);


  }

}


// ReactDOM.render(<UserForm/>,document.getElementById('react1'));
ReactDOM.render(<UserForm2/>,document.getElementById('react2'));

</script>

</body>

</html>